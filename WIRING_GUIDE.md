# 🔌 Οδηγός Σύνδεσης Αισθητήρων - ESP32-S3

## 📋 Λίστα Υλικών

1. **ESP32-S3 N16R8** (το μικροελεγκτή σας)
2. **BMP280** - Αισθητήρας θερμοκρασίας & πίεσης (I2C)
3. **BH1750** - Αισθητήρας φωτός (I2C)
4. **Capacitive Soil Moisture Sensor** - Αισθητήρας υγρασίας εδάφους (Αναλογικό)
5. Καλώδια jumper (αρσενικά-θηλυκά)
6. Breadboard (προαιρετικό)

---

## 🔴 ΣΗΜΑΝΤΙΚΟ: Τροφοδοσία

⚠️ **Όλοι οι αισθητήρες τροφοδοτούνται με 3.3V από το ESP32-S3**
⚠️ **ΜΗΝ συνδέσετε στα 5V** - μπορεί να καταστρέψετε τους αισθητήρες!

---

## 📍 Πίνακας Συνδέσεων

### ESP32-S3 Pins που χρησιμοποιούνται:

| Pin ESP32 | Λειτουργία | Σύνδεση σε |
|-----------|------------|------------|
| **GPIO 16** | I2C SDA | BMP280 SDA + BH1750 SDA |
| **GPIO 17** | I2C SCL | BMP280 SCL + BH1750 SCL |
| **GPIO 4** | Analog Input | Soil Moisture Sensor (Signal) |
| **3.3V** | Power | Όλοι οι αισθητήρες (VCC) |
| **GND** | Ground | Όλοι οι αισθητήρες (GND) |

---

## 🔌 Αναλυτική Σύνδεση κάθε Αισθητήρα

### 1️⃣ BMP280 (Θερμοκρασία & Πίεση)

**Pins του BMP280:**
```
VCC  →  3.3V (ESP32)
GND  →  GND (ESP32)
SDA  →  GPIO 16 (ESP32)
SCL  →  GPIO 17 (ESP32)
```

**Σημειώσεις:**
- Διεύθυνση I2C: 0x76 ή 0x77 (ανίχνευση αυτόματα)
- Μετράει θερμοκρασία και ατμοσφαιρική πίεση

---

### 2️⃣ BH1750 (Φωτεινότητα)

**Pins του BH1750:**
```
VCC  →  3.3V (ESP32)
GND  →  GND (ESP32)
SDA  →  GPIO 16 (ESP32) - ΚΟΙΝΟ με BMP280
SCL  →  GPIO 17 (ESP32) - ΚΟΙΝΟ με BMP280
ADDR →  Μην συνδέσετε ή GND (για διεύθυνση 0x23)
```

**Σημειώσεις:**
- Διεύθυνση I2C: 0x23 (default)
- Μετράει φωτεινότητα σε lux
- **Μοιράζεται το I2C bus με το BMP280** (αυτό είναι φυσιολογικό!)

---

### 3️⃣ Capacitive Soil Moisture Sensor (Υγρασία Εδάφους)

**Pins του Soil Sensor:**
```
VCC (ή +)  →  3.3V (ESP32)
GND (ή -)  →  GND (ESP32)
AOUT       →  GPIO 4 (ESP32)
```

**Σημειώσεις:**
- Αναλογικό σήμα (ADC)
- **Χρησιμοποιεί GPIO 4** (ADC1_CH3)
- Βαθμονομημένο για:
  - Dry (στον αέρα): 3285
  - Wet (σε νερό/υγρό χώμα): 27

---

## 🔧 Διάγραμμα Σύνδεσης (Απλοποιημένο)

```
ESP32-S3 N16R8
┌─────────────────┐
│                 │
│  3.3V ──────────┼────┬─────┬──────┐
│                 │    │     │      │
│  GND ───────────┼────┼─────┼──────┼──┐
│                 │    │     │      │  │
│  GPIO 16 (SDA)──┼────┼─────┤      │  │
│                 │    │     │      │  │
│  GPIO 17 (SCL)──┼────┼─────┤      │  │
│                 │    │     │      │  │
│  GPIO 4 (ADC)───┼────┤     │      │  │
│                 │    │     │      │  │
└─────────────────┘    │     │      │  │
                       │     │      │  │
                    ┌──▼──┐  │      │  │
                    │Soil │  │      │  │
                    │Sens │  │      │  │
                    └─────┘  │      │  │
                       VCC   │      │  │
                       GND───┘      │  │
                       AOUT         │  │
                                    │  │
                    ┌──────────┐    │  │
                    │  BMP280  │    │  │
                    └──────────┘    │  │
                       VCC ─────────┘  │
                       GND ────────────┘
                       SDA (shared)
                       SCL (shared)
                                    
                    ┌──────────┐    
                    │  BH1750  │    
                    └──────────┘    
                       VCC (από 3.3V)
                       GND (από GND)
                       SDA (από GPIO 16)
                       SCL (από GPIO 17)
```

---

## ✅ Βήματα Σύνδεσης

### Βήμα 1: Προετοιμασία
1. **Αποσυνδέστε το ESP32** από το USB
2. Συγκεντρώστε όλα τα υλικά
3. Ελέγξτε ότι έχετε τα σωστά jumper cables

### Βήμα 2: Σύνδεση Τροφοδοσίας (Power)
1. Συνδέστε το **3.3V** του ESP32 σε ένα breadboard rail (+)
2. Συνδέστε το **GND** του ESP32 σε ένα breadboard rail (-)
3. Από το breadboard, συνδέστε:
   - **3.3V** σε όλα τα VCC των αισθητήρων
   - **GND** σε όλα τα GND των αισθητήρων

### Βήμα 3: Σύνδεση I2C (BMP280 + BH1750)
1. Συνδέστε **GPIO 16 (SDA)** στα SDA και των δύο αισθητήρων
2. Συνδέστε **GPIO 17 (SCL)** στα SCL και των δύο αισθητήρων
   - Μπορείτε να χρησιμοποιήσετε breadboard για να μοιράσετε τα pins

### Βήμα 4: Σύνδεση Soil Sensor
1. Συνδέστε το **AOUT** του soil sensor στο **GPIO 4**
2. Συνδέστε **VCC** στο 3.3V
3. Συνδέστε **GND** στο GND

### Βήμα 5: Έλεγχος
1. ✅ Ελέγξτε ότι **ΔΕΝ** υπάρχει σύνδεση στο 5V
2. ✅ Ελέγξτε ότι όλα τα GND είναι κοινά
3. ✅ Ελέγξτε ότι τα I2C pins (SDA/SCL) είναι σωστά
4. ✅ Ελέγξτε ότι το soil sensor είναι στο GPIO 4

---

## 🧪 Δοκιμή μετά τη σύνδεση

1. Συνδέστε το ESP32 στο USB
2. Ανοίξτε το **Serial Monitor** (115200 baud)
3. Θα δείτε:
   ```
   🌱 Smart Greenhouse Monitor Starting...
   📡 Connecting to WiFi: Vodafone-E79546683
   ✓ WiFi connected!
   📍 IP Address: 192.168.x.x
   
   🌡️ BMP280 initialized successfully!
   💡 BH1750 initialized successfully!
   🌱 Soil moisture sensor ready
   
   Temperature: 23.4 °C, Pressure: 1013.2 hPa, Light: 450 lux, Soil: 65%
   ```

---

## ❌ Αντιμετώπιση Προβλημάτων

### Πρόβλημα: "BMP280 initialization failed"
- ✅ Ελέγξτε τις συνδέσεις SDA/SCL
- ✅ Ελέγξτε το VCC (3.3V) και GND
- ✅ Δοκιμάστε να αλλάξετε τη διεύθυνση I2C (0x76 ↔ 0x77)

### Πρόβλημα: "BH1750 initialization failed"
- ✅ Ελέγξτε τις συνδέσεις I2C (κοινές με BMP280)
- ✅ Ελέγξτε αν το pin ADDR είναι στο GND

### Πρόβλημα: "Soil Moisture: N/A" ή "-1%"
- ✅ Ελέγξτε τη σύνδεση στο GPIO 4
- ✅ Ελέγξτε VCC/GND του soil sensor
- ✅ Δοκιμάστε να βυθίσετε τον αισθητήρα σε νερό για να δείτε αλλαγή

### Πρόβλημα: "WiFi connection failed"
- ✅ Ελέγξτε το SSID και Password στο `main.cpp`
- ✅ Πλησιάστε το ESP32 στο router

---

## 📸 Φωτογραφίες (Προτάσεις)

1. Βγάλτε φωτογραφία της σύνδεσής σας
2. Σημειώστε τα pins σε χαρτί
3. Κρατήστε backup των συνδέσεων

---

## 🔄 Επόμενα Βήματα

Μετά τη σύνδεση:
1. ✅ Upload του firmware
2. ✅ Upload του filesystem (data/)
3. ✅ Άνοιγμα Serial Monitor
4. ✅ Εύρεση IP address
5. ✅ Πρόσβαση στο http://[IP] από browser

---

## 📞 Υποστήριξη

Αν συναντήσετε προβλήματα, ελέγξτε:
- Serial Monitor για error messages
- Συνδέσεις με multimeter (continuity test)
- Τάση στα 3.3V (όχι 5V!)
